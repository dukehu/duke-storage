<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.duke.microservice.storage.mapper.extend.ChunkExtendMapper">
    <select id="selectByIdentifierAndChunkNumber" resultType="com.duke.microservice.storage.domain.basic.Chunk">
        select id,
               chunk_number,
               chunk_size,
               current_chunk_size,
               total_size,
               total_chunks,
               path,
               identifier,
               file_name,
               type
        from chunk
        where identifier = #{identifier, jdbcType=VARCHAR}
          and chunk_number = #{chunkNumber, jdbcType=INTEGER}
    </select>

    <select id="selectByMd5" resultType="com.duke.microservice.storage.domain.basic.Chunk">
        select
        id,
        chunk_number,
        chunk_size,
        current_chunk_size,
        total_size,
        total_chunks,
        path,
        md5,
        file_name
        from chunk
        where md5 = #{md5, jdbcType=VARCHAR}
        order by chunk_number
    </select>
</mapper>